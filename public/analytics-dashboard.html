<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics Dashboard - Audityzer</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 1400px; margin: 0 auto; }
    header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 20px; border-radius: 8px; margin-bottom: 30px; }
    h1 { font-size: 36px; margin-bottom: 10px; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 5px solid #667eea; }
    .stat-value { font-size: 42px; font-weight: bold; color: #667eea; margin-bottom: 5px; }
    .stat-label { color: #666; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; }
    .chart-container { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 30px; }
    .chart-title { font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #333; }
    .chart-bars { display: flex; gap: 10px; align-items: flex-end; height: 200px; }
    .bar { flex: 1; background: linear-gradient(to top, #667eea, #764ba2); border-radius: 4px; position: relative; }
    .bar-label { position: absolute; bottom: -25px; left: 0; right: 0; text-align: center; font-size: 12px; }
    .bar-value { position: absolute; top: -25px; left: 0; right: 0; text-align: center; font-weight: bold; color: #667eea; }
    .table-container { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; }
    th { background: #f8f9fa; padding: 12px; text-align: left; font-weight: bold; color: #333; border-bottom: 2px solid #667eea; }
    td { padding: 12px; border-bottom: 1px solid #eee; }
    tr:hover { background: #f8f9fa; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üìä Analytics Dashboard</h1>
      <p>Real-time security audit statistics and performance metrics</p>
    </header>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">1,247</div>
        <div class="stat-label">Total Scans</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">89</div>
        <div class="stat-label">Active Domains</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">7.8</div>
        <div class="stat-label">Average Score</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">34</div>
        <div class="stat-label">Critical Findings</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">156</div>
        <div class="stat-label">Reports Generated</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">23</div>
        <div class="stat-label">Active Users</div>
      </div>
    </div>

    <div class="chart-container">
      <div class="chart-title">Security Scores Distribution</div>
      <div class="chart-bars" id="chartBars">
        <div class="bar" style="height: 85%;">
          <div class="bar-value">8.5</div>
          <div class="bar-label">Excellent</div>
        </div>
        <div class="bar" style="height: 72%;">
          <div class="bar-value">7.2</div>
          <div class="bar-label">Good</div>
        </div>
        <div class="bar" style="height: 58%;">
          <div class="bar-value">5.8</div>
          <div class="bar-label">Fair</div>
        </div>
        <div class="bar" style="height: 42%;">
          <div class="bar-value">4.2</div>
          <div class="bar-label">Poor</div>
        </div>
        <div class="bar" style="height: 35%;">
          <div class="bar-value">3.5</div>
          <div class="bar-label">Critical</div>
        </div>
      </div>
    </div>

    <div class="table-container">
      <div class="chart-title">Top Audits This Week</div>
      <table>
        <thead>
          <tr>
            <th>Domain</th>
            <th>Scan Type</th>
            <th>Score</th>
            <th>Critical Issues</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>example.com</td>
            <td>Full Security Audit</td>
            <td style="color: #28a745; font-weight: bold;">8.2</td>
            <td>1</td>
            <td>‚úÖ Complete</td>
            <td>2025-12-05</td>
          </tr>
          <tr>
            <td>api.example.com</td>
            <td>API Security</td>
            <td style="color: #ffc107; font-weight: bold;">7.5</td>
            <td>3</td>
            <td>‚úÖ Complete</td>
            <td>2025-12-04</td>
          </tr>
          <tr>
            <td>backend.example.com</td>
            <td>Infrastructure</td>
            <td style="color: #28a745; font-weight: bold;">9.1</td>
            <td>0</td>
            <td>‚úÖ Complete</td>
            <td>2025-12-03</td>
          </tr>
          <tr>
            <td>admin.example.com</td>
            <td>Access Control</td>
            <td style="color: #dc3545; font-weight: bold;">6.3</td>
            <td>7</td>
            <td>‚è≥ In Progress</td>
            <td>2025-12-02</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    async function loadAnalytics() {
      try {
        const response = await fetch('/api/analytics')
        const data = await response.json()
        if (data.success && data.analytics) {
          console.log('Analytics loaded:', data.analytics)
          // Update UI with real data from API
        }
      } catch (error) {
        console.error('Error loading analytics:', error)
      }
    }
    loadAnalytics()
  </script>
</body>
</html>
